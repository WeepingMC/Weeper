From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Yannick Lamprecht <yannicklamprecht@live.de>
Date: Wed, 27 Dec 2023 14:19:33 +0100
Subject: [PATCH] Use the constants in packet, modernise switch


diff --git a/src/main/java/com/github/weepingmc/packet/CraftPacketConversion.java b/src/main/java/com/github/weepingmc/packet/CraftPacketConversion.java
index f1378ca7a65fa10e101be0a5ed79b1f080a8dbb9..d238988ef96975c8e59c7a8784192f41715f0079 100644
--- a/src/main/java/com/github/weepingmc/packet/CraftPacketConversion.java
+++ b/src/main/java/com/github/weepingmc/packet/CraftPacketConversion.java
@@ -11,6 +11,7 @@ import java.util.ArrayList;
 import java.util.EnumMap;
 import java.util.List;
 import java.util.Set;
+import net.minecraft.network.protocol.game.ClientboundAnimatePacket;
 import net.minecraft.network.protocol.game.ClientboundPlayerInfoUpdatePacket;
 import net.minecraft.world.entity.EquipmentSlot;
 import net.minecraft.world.entity.player.Abilities;
@@ -28,28 +29,15 @@ public final class CraftPacketConversion {
     }
 
     static ClientboundPlayerInfoUpdatePacket.Action from(ProfileAction action) {
-        switch (action) {
-            case ADD_PLAYER -> {
-                return ClientboundPlayerInfoUpdatePacket.Action.ADD_PLAYER;
-            }
-            case UPDATE_LATENCY -> {
-                return ClientboundPlayerInfoUpdatePacket.Action.UPDATE_LATENCY;
-            }
-            case INITIALIZE_CHAT -> {
-                return ClientboundPlayerInfoUpdatePacket.Action.INITIALIZE_CHAT;
-            }
-            case UPDATE_GAME_MODE -> {
-                return ClientboundPlayerInfoUpdatePacket.Action.UPDATE_GAME_MODE;
-            }
-            case UPDATE_DISPLAY_NAME -> {
-                return ClientboundPlayerInfoUpdatePacket.Action.UPDATE_DISPLAY_NAME;
-            }
-
-            case UPDATE_LISTED -> {
-                return ClientboundPlayerInfoUpdatePacket.Action.UPDATE_LISTED;
-            }
-        }
-        throw new UnsupportedOperationException("Invalid case!");
+        return switch (action) {
+            case ADD_PLAYER -> ClientboundPlayerInfoUpdatePacket.Action.ADD_PLAYER;
+            case UPDATE_LATENCY -> ClientboundPlayerInfoUpdatePacket.Action.UPDATE_LATENCY;
+            case INITIALIZE_CHAT -> ClientboundPlayerInfoUpdatePacket.Action.INITIALIZE_CHAT;
+            case UPDATE_GAME_MODE -> ClientboundPlayerInfoUpdatePacket.Action.UPDATE_GAME_MODE;
+            case UPDATE_DISPLAY_NAME -> ClientboundPlayerInfoUpdatePacket.Action.UPDATE_DISPLAY_NAME;
+            case UPDATE_LISTED -> ClientboundPlayerInfoUpdatePacket.Action.UPDATE_LISTED;
+            default -> throw new UnsupportedOperationException("Invalid case!");
+        };
     }
 
     static EquipmentSlot from(org.bukkit.inventory.EquipmentSlot equipmentSlot) {
@@ -92,12 +80,11 @@ public final class CraftPacketConversion {
 
     static int fromAnimation(Animation animation) {
         return switch (animation) {
-            case SWING_MAIN_ARM -> 0;
-            case TAKE_DAMAGE -> 1;
-            case LEAVE_BED -> 2;
-            case SWING_OFFHAND -> 3;
-            case CRITICAL_EFFECT -> 4;
-            case MAGIC_CRITICAL_EFFECT -> 5;
+            case SWING_MAIN_ARM, SWING_MAIN_HAND -> ClientboundAnimatePacket.SWING_MAIN_HAND;
+            case LEAVE_BED -> ClientboundAnimatePacket.WAKE_UP;
+            case SWING_OFFHAND -> ClientboundAnimatePacket.SWING_OFF_HAND;
+            case CRITICAL_EFFECT, TAKE_DAMAGE, CRITICAL_HIT -> ClientboundAnimatePacket.CRITICAL_HIT;
+            case MAGIC_CRITICAL_EFFECT -> ClientboundAnimatePacket.MAGIC_CRITICAL_HIT;
         };
     }
 
